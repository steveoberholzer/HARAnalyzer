<Window x:Class="HARAnalyzer.CompareWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="HAR Analyzer — Compare"
        Height="720" Width="1280"
        MinHeight="480" MinWidth="720"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded">

    <DockPanel>

        <!-- Menu bar -->
        <Menu DockPanel.Dock="Top" FontSize="13">
            <MenuItem Header="_View">
                <MenuItem Header="Expand All"   Click="MenuExpandAll_Click"/>
                <MenuItem Header="Collapse All" Click="MenuCollapseAll_Click"/>
            </MenuItem>
            <MenuItem Header="_Export">
                <MenuItem Header="Export to Excel…" Click="MenuExportExcel_Click"/>
            </MenuItem>
        </Menu>

        <!-- Status bar -->
        <StatusBar DockPanel.Dock="Bottom" Height="24" FontSize="12">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="Ready"/>
            </StatusBarItem>
        </StatusBar>

        <!-- Main split view -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280" MinWidth="140" MaxWidth="700"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*"   MinWidth="300"/>
            </Grid.ColumnDefinitions>

            <!-- Left: TreeView -->
            <TreeView x:Name="CompareTree"
                      Grid.Column="0"
                      BorderThickness="0,0,1,0"
                      BorderBrush="#d0d0d0"
                      FontSize="13"
                      Background="#fafafa"
                      SelectedItemChanged="CompareTree_SelectedItemChanged"
                      PreviewMouseRightButtonDown="CompareTree_PreviewMouseRightButtonDown">
                <TreeView.ContextMenu>
                    <ContextMenu Opened="TreeContextMenu_Opened">
                        <MenuItem Header="Export to CSV…"  Click="CtxExportCsv_Click"/>
                        <MenuItem Header="Copy as CSV"     Click="CtxCopyCsv_Click"/>
                    </ContextMenu>
                </TreeView.ContextMenu>
            </TreeView>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1"
                          HorizontalAlignment="Stretch"
                          Background="#d8d8d8"
                          ShowsPreview="True"/>

            <!-- Right: WebView2 -->
            <wv2:WebView2 x:Name="ContentBrowser"
                          Grid.Column="2"/>
        </Grid>

    </DockPanel>
</Window>
